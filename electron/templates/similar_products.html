{% extends 'base.html' %}
{% load static %}

{% block content %}
<div style="padding-top:90px;background-color:#f8f9fa">
    <div style="padding:20px;max-width:1200px;margin:0 auto">
        <div style="background:#fff;padding:20px;border-radius:15px;box-shadow:0 2px 10px rgba(0,0,0,0.1);margin-bottom:25px">
            <h3 style="font-size:22px;color:#333;margin-bottom:15px">
                Similar Products in {{ category_name }}
            </h3>
            
            <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));gap:25px">
                {% for product in similar_products %}
                <div style="background:#fff;border-radius:12px;box-shadow:0 3px 15px rgba(0,0,0,0.1);transition:all 0.3s ease;overflow:hidden;height:100%;display:flex;flex-direction:column"
                     onmouseover="this.style.transform='translateY(-5px)';this.style.boxShadow='0 5px 20px rgba(0,0,0,0.15)'"
                     onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 3px 15px rgba(0,0,0,0.1)'">
                    
                    {% if product.image %}
                    <div style="height:300px;overflow:hidden;position:relative;display:flex;align-items:center;justify-content:center;background:#f8f9fa">
                        <img src="{{ product.image.url }}" 
                             alt="{{ product.name }}" 
                             style="max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;transition:transform 0.3s ease"
                             onmouseover="this.style.transform='scale(1.05)'"
                             onmouseout="this.style.transform='scale(1)'">
                    </div>
                    {% else %}
                    <div style="height:300px;overflow:hidden;position:relative;display:flex;align-items:center;justify-content:center;background:#f8f9fa">
                        <img src="{% static 'images/no-image.png' %}" 
                             alt="No image available" 
                             style="max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain">
                    </div>
                    {% endif %}
                    
                    <div style="padding:15px;flex:1;display:flex;flex-direction:column;justify-content:space-between">
                        <h6 style="font-size:16px;margin-bottom:10px;color:#2c3e50;min-height:48px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical">
                            {{ product.name }}
                        </h6>
                        
                        <div style="margin-bottom:15px">
                            <span style="color:#27ae60;font-weight:600;font-size:18px">₹{{ product.price }}</span>
                        </div>
                        
                        <div style="display:flex;gap:10px;flex-direction:column">
                            <a href="{% url 'product_detail' product.id %}" 
                               class="btn btn-sm btn-primary" 
                               style="padding:8px 15px;font-size:14px;text-decoration:none;text-align:center;border-radius:5px;background:#3498db;color:#fff;transition:all 0.3s ease"
                               onmouseover="this.style.background='#2980b9'"
                               onmouseout="this.style.background='#3498db'">
                                <i class="fas fa-info-circle"></i> View Details
                            </a>
                            <form action="{% url 'add_to_cart' product.id %}" method="POST">
                                {% csrf_token %}
                                <button type="submit" 
                                        class="btn btn-sm btn-success" 
                                        style="width:100%;padding:8px 15px;font-size:14px;background:#2ecc71;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:all 0.3s ease"
                                        onmouseover="this.style.background='#27ae60'"
                                        onmouseout="this.style.background='#2ecc71'">
                                    <i class="fas fa-shopping-cart"></i> Add to Cart
                                </button>
                            </form>
                            <!-- New Purchase Probability Button -->
                            <div style="display:flex;gap:10px;flex-direction:column">
                                <a href="{% url 'purchase_probability' product.id %}" 
                                   class="btn btn-sm btn-warning" 
                                   style="padding:8px 15px;font-size:14px;text-decoration:none;text-align:center;border-radius:5px;background:#f39c12;color:#fff;transition:all 0.3s ease"
                                   onmouseover="this.style.background='#e67e22'"
                                   onmouseout="this.style.background='#f39c12'">
                                    <i class="fas fa-chart-line"></i> Purchase Probability
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div style="text-align:center;padding:30px;grid-column:1/-1">
                    <p style="color:#7f8c8d">No products found in {{ category_name }} category.</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% comment %} {% extends 'base.html' %}
{% load static %}

{% block content %}
<div style="padding-top:90px;background-color:#f8f9fa">
    <div style="padding:20px;max-width:1200px;margin:0 auto">
        <div style="background:#fff;padding:20px;border-radius:15px;box-shadow:0 2px 10px rgba(0,0,0,0.1);margin-bottom:25px">
            <h3 style="font-size:22px;color:#333;margin-bottom:15px">
                Similar Products in {{ category_name }}
            </h3>
            
            <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));gap:25px">
                {% for product in similar_products %}
                <div style="background:#fff;border-radius:12px;box-shadow:0 3px 15px rgba(0,0,0,0.1);transition:all 0.3s ease;overflow:hidden;height:100%;display:flex;flex-direction:column"
                     onmouseover="this.style.transform='translateY(-5px)';this.style.boxShadow='0 5px 20px rgba(0,0,0,0.15)'"
                     onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 3px 15px rgba(0,0,0,0.1)'">
                    
                    {% if product.image %}
                    <div style="height:300px;overflow:hidden;position:relative;display:flex;align-items:center;justify-content:center;background:#f8f9fa">
                        <img src="{{ product.image.url }}" 
                             alt="{{ product.name }}" 
                             style="max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;transition:transform 0.3s ease"
                             onmouseover="this.style.transform='scale(1.05)'"
                             onmouseout="this.style.transform='scale(1)'">
                    </div>
                    {% else %}
                    <div style="height:300px;overflow:hidden;position:relative;display:flex;align-items:center;justify-content:center;background:#f8f9fa">
                        <img src="{% static 'images/no-image.png' %}" 
                             alt="No image available" 
                             style="max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain">
                    </div>
                    {% endif %}
                    
                    <div style="padding:15px;flex:1;display:flex;flex-direction:column;justify-content:space-between">
                        <h6 style="font-size:16px;margin-bottom:10px;color:#2c3e50;min-height:48px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical">
                            {{ product.name }}
                        </h6>
                        
                        <div style="margin-bottom:15px">
                            <span style="color:#27ae60;font-weight:600;font-size:18px">₹{{ product.price }}</span>
                        </div>
                        
                        <div style="display:flex;gap:10px">
                            <a href="{% url 'product_detail' product.id %}" 
                               class="btn btn-sm btn-primary" 
                               style="flex:1;padding:8px 15px;font-size:14px;text-decoration:none;text-align:center;border-radius:5px;background:#3498db;color:#fff;transition:all 0.3s ease"
                               onmouseover="this.style.background='#2980b9'"
                               onmouseout="this.style.background='#3498db'">
                                <i class="fas fa-info-circle"></i> View Details
                            </a>
                            <form action="{% url 'add_to_cart' product.id %}" method="POST" style="flex:1">
                                {% csrf_token %}
                                <button type="submit" 
                                        class="btn btn-sm btn-success" 
                                        style="width:100%;padding:8px 15px;font-size:14px;background:#2ecc71;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:all 0.3s ease"
                                        onmouseover="this.style.background='#27ae60'"
                                        onmouseout="this.style.background='#2ecc71'">
                                    <i class="fas fa-shopping-cart"></i> Add to Cart
                                </button>
                            </form>
                               <!-- New Purchase Probability Button -->
                            {% comment %} <a href="{% url 'purchase_probability' product.id %}" 
                               class="btn btn-sm btn-warning" 
                               style="flex:1;padding:8px 15px;font-size:14px;text-decoration:none;text-align:center;border-radius:5px;background:#f39c12;color:#fff;transition:all 0.3s ease"
                               onmouseover="this.style.background='#e67e22'"
                               onmouseout="this.style.background='#f39c12'">
                                <i class="fas fa-chart-line"></i> Purchase Probability
                            </a> {% endcomment %}
                        {% comment %} </div>
                    </div>
                </div>
                {% empty %}
                <div style="text-align:center;padding:30px;grid-column:1/-1">
                    <p style="color:#7f8c8d">No products found in {{ category_name }} category.</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}  {% endcomment %} 